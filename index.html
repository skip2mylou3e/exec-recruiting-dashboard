<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Thomson Reuters | Executive Search Firm Report Card</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/react@18/umd/react.development.js" crossorigin></script>
    <script src="https://cdn.jsdelivr.net/npm/react-dom@18/umd/react-dom.development.js" crossorigin></script>
    <script src="https://cdn.jsdelivr.net/npm/prop-types@15/prop-types.min.js" crossorigin></script>
    <script src="https://cdn.jsdelivr.net/npm/recharts@2.1.16/umd/Recharts.min.js" crossorigin></script>
    <style>
:root {
    --tr-orange: #FF6B00;
    --tr-dark: #1A1A1A;
    --tr-gray-900: #2D2D2D;
    --tr-gray-600: #5D5D5D;
    --tr-gray-500: #7D7D7D;
    --tr-gray-400: #9D9D9D;
    --tr-gray-300: #BDBDBD;
    --tr-gray-200: #E0E0E0;
    --tr-gray-100: #F5F5F5;
    --tr-white: #FFFFFF;
    --grade-a: #22C55E;
    --grade-b: #84CC16;
    --grade-c: #EAB308;
    --grade-d: #F97316;
    --grade-f: #EF4444;
    --success: #22C55E;
    --warning: #EAB308;
    --danger: #EF4444;
    --info: #3B82F6;
    --shadow: 0 1px 3px rgba(0, 0, 0, 0.1), 0 1px 2px rgba(0, 0, 0, 0.06);
    --shadow-md: 0 4px 6px rgba(0, 0, 0, 0.1), 0 2px 4px rgba(0, 0, 0, 0.06);
    --shadow-lg: 0 10px 15px rgba(0, 0, 0, 0.1), 0 4px 6px rgba(0, 0, 0, 0.05);
    --radius: 8px;
    --radius-lg: 12px;
}
* { margin: 0; padding: 0; box-sizing: border-box; }
body { font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif; background: var(--tr-gray-100); color: var(--tr-dark); line-height: 1.5; }
.header { background: var(--tr-dark); color: var(--tr-white); padding: 0 24px; height: 64px; display: flex; align-items: center; justify-content: space-between; position: sticky; top: 0; z-index: 100; }
.header-brand { display: flex; align-items: center; gap: 16px; }
.header-logo { font-size: 24px; font-weight: 700; color: var(--tr-orange); }
.header-divider { width: 1px; height: 24px; background: var(--tr-gray-600); }
.header-title { font-size: 14px; font-weight: 500; color: var(--tr-gray-300); }
.header-meta { display: flex; align-items: center; gap: 24px; }
.header-date { font-size: 13px; color: var(--tr-gray-400); }
.avatar { width: 32px; height: 32px; border-radius: 50%; background: var(--tr-orange); display: flex; align-items: center; justify-content: center; font-weight: 600; font-size: 12px; }
.nav { background: var(--tr-white); border-bottom: 1px solid var(--tr-gray-200); padding: 0 24px; display: flex; gap: 4px; }
.nav-item { padding: 16px 20px; font-size: 14px; font-weight: 500; color: var(--tr-gray-600); cursor: pointer; border-bottom: 2px solid transparent; transition: all 0.2s; }
.nav-item:hover { color: var(--tr-dark); background: var(--tr-gray-100); }
.nav-item.active { color: var(--tr-orange); border-bottom-color: var(--tr-orange); }
.main-container { max-width: 1600px; margin: 0 auto; padding: 24px; }
.filters-bar { background: var(--tr-white); border-radius: var(--radius-lg); padding: 16px 20px; margin-bottom: 24px; display: flex; align-items: center; gap: 16px; flex-wrap: wrap; box-shadow: var(--shadow); }
.filter-group { display: flex; flex-direction: column; gap: 4px; }
.filter-label { font-size: 11px; font-weight: 600; text-transform: uppercase; letter-spacing: 0.5px; color: var(--tr-gray-500); }
.filter-select { padding: 8px 32px 8px 12px; font-size: 13px; border: 1px solid var(--tr-gray-300); border-radius: var(--radius); background: var(--tr-white); min-width: 140px; appearance: none; background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' viewBox='0 0 24 24' fill='none' stroke='%235D5D5D' stroke-width='2'%3E%3Cpath d='M6 9l6 6 6-6'/%3E%3C/svg%3E"); background-repeat: no-repeat; background-position: right 10px center; cursor: pointer; }
.filter-select:focus { outline: none; border-color: var(--tr-orange); }
.filter-reset { margin-left: auto; padding: 8px 16px; font-size: 13px; font-weight: 500; color: var(--tr-gray-600); background: none; border: 1px solid var(--tr-gray-300); border-radius: var(--radius); cursor: pointer; }
.filter-reset:hover { background: var(--tr-gray-100); }
.kpi-grid { display: grid; grid-template-columns: repeat(4, 1fr); gap: 16px; margin-bottom: 24px; }
.kpi-card { background: var(--tr-white); border-radius: var(--radius-lg); padding: 20px; box-shadow: var(--shadow); }
.kpi-label { font-size: 12px; font-weight: 600; text-transform: uppercase; letter-spacing: 0.5px; color: var(--tr-gray-500); margin-bottom: 8px; }
.kpi-value { font-size: 32px; font-weight: 700; color: var(--tr-dark); line-height: 1.1; }
.kpi-change { display: inline-flex; align-items: center; gap: 4px; font-size: 13px; font-weight: 500; margin-top: 8px; padding: 2px 8px; border-radius: 4px; }
.kpi-change.positive { color: var(--success); background: rgba(34, 197, 94, 0.1); }
.kpi-change.negative { color: var(--danger); background: rgba(239, 68, 68, 0.1); }
.scorecard-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(340px, 1fr)); gap: 20px; }
.scorecard { background: var(--tr-white); border-radius: var(--radius-lg); box-shadow: var(--shadow); overflow: hidden; cursor: pointer; transition: all 0.2s; border: 2px solid transparent; }
.scorecard:hover { box-shadow: var(--shadow-lg); transform: translateY(-2px); }
.scorecard-header { padding: 20px; display: flex; align-items: flex-start; gap: 16px; border-bottom: 1px solid var(--tr-gray-200); }
.grade-badge { width: 64px; height: 64px; border-radius: var(--radius-lg); display: flex; align-items: center; justify-content: center; font-size: 32px; font-weight: 700; color: var(--tr-white); flex-shrink: 0; }
.grade-badge.grade-a { background: var(--grade-a); }
.grade-badge.grade-b { background: var(--grade-b); }
.grade-badge.grade-c { background: var(--grade-c); }
.grade-badge.grade-d { background: var(--grade-d); }
.grade-badge.grade-f { background: var(--grade-f); }
.scorecard-info { flex: 1; min-width: 0; }
.scorecard-firm { font-size: 18px; font-weight: 600; color: var(--tr-dark); margin-bottom: 4px; }
.scorecard-meta { font-size: 13px; color: var(--tr-gray-500); }
.scorecard-trend { display: flex; align-items: center; gap: 4px; font-size: 12px; font-weight: 600; padding: 4px 8px; border-radius: 4px; }
.scorecard-trend.up { color: var(--success); background: rgba(34, 197, 94, 0.1); }
.scorecard-trend.down { color: var(--danger); background: rgba(239, 68, 68, 0.1); }
.scorecard-trend.stable { color: var(--tr-gray-500); background: var(--tr-gray-100); }
.scorecard-body { padding: 16px 20px; }
.scorecard-stats { display: grid; grid-template-columns: repeat(2, 1fr); gap: 16px; }
.scorecard-stat { display: flex; flex-direction: column; }
.stat-label { font-size: 11px; font-weight: 600; text-transform: uppercase; letter-spacing: 0.5px; color: var(--tr-gray-500); margin-bottom: 4px; }
.stat-value { font-size: 20px; font-weight: 600; color: var(--tr-dark); }
.stat-value.success { color: var(--success); }
.stat-value.warning { color: var(--warning); }
.stat-value.danger { color: var(--danger); }
.scorecard-footer { padding: 12px 20px; background: var(--tr-gray-100); display: flex; justify-content: space-between; align-items: center; }
.mini-chart { flex: 1; height: 40px; }
.view-details { font-size: 13px; font-weight: 500; color: var(--tr-orange); }
.card { background: var(--tr-white); border-radius: var(--radius-lg); box-shadow: var(--shadow); overflow: hidden; }
.card-header { padding: 16px 20px; border-bottom: 1px solid var(--tr-gray-200); display: flex; align-items: center; justify-content: space-between; }
.card-title { font-size: 16px; font-weight: 600; color: var(--tr-dark); }
.card-subtitle { font-size: 13px; color: var(--tr-gray-500); margin-top: 2px; }
.card-body { padding: 20px; }
.data-table { width: 100%; border-collapse: collapse; }
.data-table th { text-align: left; padding: 12px 16px; font-size: 11px; font-weight: 600; text-transform: uppercase; letter-spacing: 0.5px; color: var(--tr-gray-500); background: var(--tr-gray-100); border-bottom: 1px solid var(--tr-gray-200); cursor: pointer; }
.data-table th:hover { background: var(--tr-gray-200); }
.data-table td { padding: 14px 16px; font-size: 14px; border-bottom: 1px solid var(--tr-gray-200); color: #3D3D3D; }
.data-table tr:hover td { background: var(--tr-gray-100); }
.status-badge { display: inline-flex; align-items: center; gap: 6px; padding: 4px 10px; font-size: 12px; font-weight: 500; border-radius: 100px; }
.status-badge.active { color: var(--success); background: rgba(34, 197, 94, 0.1); }
.status-badge.left { color: var(--warning); background: rgba(234, 179, 8, 0.1); }
.status-badge.terminated { color: var(--danger); background: rgba(239, 68, 68, 0.1); }
.status-badge.eliminated { color: var(--tr-gray-500); background: var(--tr-gray-100); }
.status-dot { width: 6px; height: 6px; border-radius: 50%; background: currentColor; }
.perf-badge { display: inline-block; padding: 3px 8px; font-size: 11px; font-weight: 600; border-radius: 4px; }
.perf-badge.exceeds { color: var(--success); background: rgba(34, 197, 94, 0.1); }
.perf-badge.meets { color: var(--info); background: rgba(59, 130, 246, 0.1); }
.perf-badge.below { color: var(--danger); background: rgba(239, 68, 68, 0.1); }
.perf-badge.early { color: var(--tr-gray-500); background: var(--tr-gray-100); }
.level-badge { display: inline-block; padding: 2px 8px; font-size: 11px; font-weight: 600; border-radius: 4px; background: var(--tr-gray-100); color: #4B5563; }
.level-badge.c-suite { background: rgba(139, 92, 246, 0.1); color: #7C3AED; }
.level-badge.svp { background: rgba(59, 130, 246, 0.1); color: #2563EB; }
.level-badge.vp { background: rgba(16, 185, 129, 0.1); color: #059669; }
.level-badge.director { background: rgba(245, 158, 11, 0.1); color: #D97706; }
.charts-grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 24px; margin-bottom: 24px; }
.chart-container { background: var(--tr-white); border-radius: var(--radius-lg); box-shadow: var(--shadow); padding: 20px; }
.chart-title { font-size: 14px; font-weight: 600; color: var(--tr-dark); margin-bottom: 16px; }
.deep-dive-header { display: flex; align-items: flex-start; gap: 24px; padding: 24px; background: var(--tr-white); border-radius: var(--radius-lg); box-shadow: var(--shadow); margin-bottom: 24px; }
.deep-dive-info { flex: 1; }
.deep-dive-firm { font-size: 28px; font-weight: 700; color: var(--tr-dark); margin-bottom: 8px; }
.deep-dive-summary { font-size: 15px; color: var(--tr-gray-600); margin-bottom: 16px; max-width: 600px; }
.grade-breakdown { display: flex; gap: 24px; }
.grade-component { display: flex; flex-direction: column; gap: 4px; }
.component-label { font-size: 11px; font-weight: 600; text-transform: uppercase; letter-spacing: 0.5px; color: var(--tr-gray-500); }
.component-score { font-size: 20px; font-weight: 600; }
.back-button { padding: 8px 16px; font-size: 14px; font-weight: 500; color: var(--tr-gray-600); background: none; border: 1px solid var(--tr-gray-300); border-radius: var(--radius); cursor: pointer; display: flex; align-items: center; gap: 8px; }
.back-button:hover { background: var(--tr-gray-100); }
.table-controls { display: flex; justify-content: space-between; align-items: center; margin-bottom: 16px; }
.search-input { padding: 8px 12px 8px 36px; font-size: 14px; border: 1px solid var(--tr-gray-300); border-radius: var(--radius); width: 280px; background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 24 24' fill='none' stroke='%237D7D7D' stroke-width='2'%3E%3Ccircle cx='11' cy='11' r='8'/%3E%3Cpath d='M21 21l-4.35-4.35'/%3E%3C/svg%3E"); background-repeat: no-repeat; background-position: 10px center; }
.search-input:focus { outline: none; border-color: var(--tr-orange); }
.export-btn { padding: 8px 16px; font-size: 14px; font-weight: 500; color: var(--tr-white); background: var(--tr-orange); border: none; border-radius: var(--radius); cursor: pointer; }
.export-btn:hover { background: #E55D00; }
.pagination { display: flex; justify-content: center; align-items: center; gap: 8px; padding: 16px; }
.page-btn { width: 36px; height: 36px; display: flex; align-items: center; justify-content: center; font-size: 14px; border: 1px solid var(--tr-gray-300); border-radius: var(--radius); background: var(--tr-white); cursor: pointer; }
.page-btn:hover { background: var(--tr-gray-100); }
.page-btn.active { background: var(--tr-orange); border-color: var(--tr-orange); color: var(--tr-white); }
.page-btn:disabled { opacity: 0.5; cursor: not-allowed; }
.comparison-selector { margin-bottom: 24px; display: flex; gap: 16px; flex-wrap: wrap; }
.firm-checkbox { display: flex; align-items: center; gap: 8px; padding: 8px 16px; background: var(--tr-white); border: 1px solid var(--tr-gray-300); border-radius: var(--radius); cursor: pointer; }
.firm-checkbox:hover { border-color: var(--tr-orange); }
.firm-checkbox.selected { background: rgba(255, 107, 0, 0.05); border-color: var(--tr-orange); }
.firm-checkbox input { accent-color: var(--tr-orange); }
.comparison-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 20px; margin-bottom: 24px; }
.comparison-metrics { display: flex; flex-direction: column; gap: 16px; }
.metric-row { display: flex; align-items: center; gap: 16px; padding: 16px; background: var(--tr-white); border-radius: var(--radius); box-shadow: 0 1px 2px rgba(0,0,0,0.05); }
.metric-name { width: 160px; font-size: 13px; font-weight: 600; color: #4D4D4D; }
.metric-bars { flex: 1; display: flex; gap: 8px; }
.metric-bar-container { flex: 1; }
.metric-bar-label { font-size: 11px; color: var(--tr-gray-500); margin-bottom: 4px; }
.metric-bar { height: 24px; border-radius: 4px; display: flex; align-items: center; padding: 0 8px; font-size: 12px; font-weight: 600; color: var(--tr-white); }
.recommendation-box { background: linear-gradient(135deg, rgba(255, 107, 0, 0.05), rgba(255, 107, 0, 0.02)); border: 1px solid rgba(255, 107, 0, 0.2); border-radius: var(--radius-lg); padding: 20px; margin-top: 24px; }
.recommendation-header { display: flex; align-items: center; gap: 8px; font-weight: 600; color: var(--tr-orange); margin-bottom: 8px; }
.recommendation-text { font-size: 15px; color: #4D4D4D; line-height: 1.6; }
.rhr-comparison { display: grid; grid-template-columns: repeat(2, 1fr); gap: 24px; margin-bottom: 24px; }
.rhr-group { background: var(--tr-white); border-radius: var(--radius-lg); box-shadow: var(--shadow); overflow: hidden; }
.rhr-group-header { padding: 16px 20px; background: var(--tr-gray-100); font-weight: 600; display: flex; justify-content: space-between; align-items: center; }
.rhr-group-count { font-size: 13px; font-weight: 500; color: var(--tr-gray-500); }
.rhr-metrics { padding: 20px; display: grid; grid-template-columns: repeat(2, 1fr); gap: 20px; }
.rhr-metric { text-align: center; }
.rhr-metric-value { font-size: 36px; font-weight: 700; }
.rhr-metric-label { font-size: 12px; color: var(--tr-gray-500); margin-top: 4px; }
.glossary-btn { padding: 8px 16px; font-size: 13px; font-weight: 500; color: var(--tr-white); background: var(--tr-gray-600); border: none; border-radius: var(--radius); cursor: pointer; margin-left: 8px; }
.glossary-btn:hover { background: var(--tr-gray-700); }
.modal-overlay { position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: rgba(0,0,0,0.5); display: flex; align-items: center; justify-content: center; z-index: 1000; }
.modal { background: var(--tr-white); border-radius: var(--radius-lg); max-width: 700px; max-height: 80vh; overflow-y: auto; box-shadow: var(--shadow-lg); }
.modal-header { padding: 20px 24px; border-bottom: 1px solid var(--tr-gray-200); display: flex; justify-content: space-between; align-items: center; position: sticky; top: 0; background: var(--tr-white); }
.modal-title { font-size: 20px; font-weight: 600; color: var(--tr-dark); }
.modal-close { background: none; border: none; font-size: 24px; cursor: pointer; color: var(--tr-gray-500); }
.modal-close:hover { color: var(--tr-dark); }
.modal-body { padding: 24px; }
.glossary-section { margin-bottom: 24px; }
.glossary-section:last-child { margin-bottom: 0; }
.glossary-section-title { font-size: 14px; font-weight: 600; color: var(--tr-orange); text-transform: uppercase; letter-spacing: 0.5px; margin-bottom: 12px; padding-bottom: 8px; border-bottom: 1px solid var(--tr-gray-200); }
.glossary-item { margin-bottom: 16px; }
.glossary-term { font-size: 14px; font-weight: 600; color: var(--tr-dark); margin-bottom: 4px; }
.glossary-def { font-size: 13px; color: var(--tr-gray-600); line-height: 1.5; }
.glossary-formula { font-size: 12px; color: var(--tr-gray-500); font-family: monospace; background: var(--tr-gray-100); padding: 4px 8px; border-radius: 4px; margin-top: 4px; display: inline-block; }
@media (max-width: 1200px) {
    .kpi-grid, .charts-grid { grid-template-columns: repeat(2, 1fr); }
    .comparison-grid { grid-template-columns: repeat(2, 1fr); }
}
@media (max-width: 768px) {
    .header { padding: 0 12px; height: 56px; }
    .header-logo { font-size: 18px; }
    .header-divider, .header-title, .header-date { display: none; }
    .header-user span { display: none; }
    .nav { padding: 0 8px; overflow-x: auto; -webkit-overflow-scrolling: touch; }
    .nav-item { padding: 12px 14px; font-size: 13px; white-space: nowrap; }
    .main-container { padding: 12px; }
    .filters-bar { flex-direction: column; align-items: stretch; padding: 12px; gap: 12px; }
    .filter-group { width: 100%; }
    .filter-select { width: 100%; min-width: unset; }
    .filter-reset, .glossary-btn { width: 100%; margin-left: 0; margin-top: 4px; }
    .kpi-grid { grid-template-columns: repeat(2, 1fr); gap: 8px; margin-bottom: 16px; }
    .kpi-card { padding: 12px; }
    .kpi-label { font-size: 10px; margin-bottom: 4px; }
    .kpi-value { font-size: 22px; }
    .scorecard-grid { grid-template-columns: 1fr; gap: 12px; }
    .scorecard-header { padding: 14px; gap: 12px; }
    .grade-badge { width: 50px; height: 50px; font-size: 24px; }
    .scorecard-firm { font-size: 16px; }
    .scorecard-body { padding: 12px 14px; }
    .scorecard-stats { gap: 12px; }
    .stat-value { font-size: 18px; }
    .charts-grid { grid-template-columns: 1fr; gap: 16px; }
    .chart-container { padding: 14px; }
    .chart-title { font-size: 13px; margin-bottom: 12px; }
    .rhr-comparison, .comparison-grid { grid-template-columns: 1fr; gap: 16px; }
    .rhr-metrics { grid-template-columns: repeat(2, 1fr); gap: 12px; padding: 14px; }
    .rhr-metric-value { font-size: 28px; }
    .comparison-selector { gap: 8px; }
    .firm-checkbox { padding: 6px 10px; font-size: 12px; }
    .metric-row { flex-direction: column; align-items: flex-start; padding: 12px; }
    .metric-name { width: 100%; margin-bottom: 8px; }
    .metric-bars { width: 100%; flex-direction: column; gap: 6px; }
    .card-header { padding: 12px 14px; }
    .card-title { font-size: 14px; }
    .card-body { padding: 12px; }
    .table-controls { flex-direction: column; gap: 10px; }
    .search-input { width: 100%; }
    .export-btn { width: 100%; justify-content: center; }
    .data-table { font-size: 12px; display: block; overflow-x: auto; -webkit-overflow-scrolling: touch; }
    .data-table th, .data-table td { padding: 10px 8px; white-space: nowrap; }
    .pagination { padding: 12px 8px; gap: 4px; }
    .page-btn { width: 32px; height: 32px; font-size: 12px; }
    .deep-dive-header { flex-direction: column; padding: 16px; gap: 16px; }
    .deep-dive-header .grade-badge { width: 80px !important; height: 80px !important; font-size: 48px !important; margin: 0 auto; }
    .deep-dive-firm { font-size: 22px; text-align: center; }
    .deep-dive-summary { font-size: 14px; text-align: center; }
    .grade-breakdown { flex-wrap: wrap; justify-content: center; gap: 16px; }
    .grade-component { align-items: center; min-width: 80px; }
    .back-button { width: 100%; justify-content: center; }
    .modal { margin: 10px; max-width: calc(100% - 20px); max-height: calc(100vh - 20px); border-radius: var(--radius); }
    .modal-header { padding: 14px 16px; }
    .modal-title { font-size: 18px; }
    .modal-body { padding: 16px; }
    .glossary-item { margin-bottom: 14px; }
    .glossary-formula { font-size: 11px; word-break: break-all; }
    .recommendation-box { padding: 14px; margin-top: 16px; }
    .recommendation-text { font-size: 14px; }
}
@media (max-width: 480px) {
    .kpi-grid { grid-template-columns: 1fr; }
    .kpi-card { display: flex; justify-content: space-between; align-items: center; }
    .kpi-label { margin-bottom: 0; }
    .kpi-value { font-size: 20px; }
    .rhr-metrics { grid-template-columns: 1fr; }
    .scorecard-stats { grid-template-columns: 1fr; gap: 8px; }
    .scorecard-stat { flex-direction: row; justify-content: space-between; align-items: center; }
    .stat-label { margin-bottom: 0; }
    .grade-breakdown { gap: 12px; }
    .component-score { font-size: 16px; }
}
    </style>
</head>
<body>
    <div id="root"></div>
    <script>
const e = React.createElement;
const { useState, useMemo } = React;
const { LineChart, Line, BarChart, Bar, PieChart, Pie, Cell, XAxis, YAxis, CartesianGrid, Tooltip, Legend, ResponsiveContainer, AreaChart, Area, ComposedChart } = Recharts;

const TR_REGIONS = ['North America', 'EMEA', 'APAC', 'LATAM'];
const TR_FUNCTIONS = ['Technology & Engineering', 'Finance & Accounting', 'Legal & Compliance', 'Sales & Commercial', 'Product Management', 'Marketing & Communications', 'Human Resources', 'Operations', 'Risk & Regulatory', 'Strategy & Corporate Development', 'Data & Analytics'];
const TR_LEVELS = ['C-Suite', 'SVP', 'VP', 'Director', 'Senior Manager'];
const SEARCH_FIRMS = [
    { id: 'rra', name: 'Russell Reynolds Associates', specialty: 'C-Suite & Board' },
    { id: 'ss', name: 'Spencer Stuart', specialty: 'Premium Executive Search' },
    { id: 'hs', name: 'Heidrick & Struggles', specialty: 'Leadership Advisory' },
    { id: 'kf', name: 'Korn Ferry', specialty: 'Full-spectrum Talent' },
    { id: 'ez', name: 'Egon Zehnder', specialty: 'Board & CEO Advisory' },
    { id: 'cp', name: 'Caldwell Partners', specialty: 'Technology & Digital' }
];
const PERFORMANCE_RATINGS = ['Exceeds', 'Meets', 'Below', 'Too Early to Assess'];
const EXEC_NAMES = ['Michael Chen', 'Sarah Thompson', 'James Rodriguez', 'Emily Watson', 'David Kim', 'Jennifer Martinez', 'Robert Johnson', 'Lisa Anderson', 'Christopher Lee', 'Amanda Davis', 'Matthew Wilson', 'Rebecca Taylor', 'Andrew Brown', 'Katherine Miller', 'Daniel Garcia', 'Michelle Thomas', 'Steven Moore', 'Laura Jackson', 'Kevin White', 'Rachel Harris', 'Brian Martin', 'Nicole Robinson', 'Eric Clark', 'Samantha Lewis', 'Jason Walker', 'Priya Patel', 'Raj Sharma', 'Wei Zhang', 'Yuki Tanaka', 'Hans Mueller'];

const ROLE_TITLES = {
    'C-Suite': { 'Technology & Engineering': ['Chief Technology Officer', 'Chief Information Officer'], 'Finance & Accounting': ['Chief Financial Officer'], 'Legal & Compliance': ['General Counsel'], 'Sales & Commercial': ['Chief Revenue Officer'], 'Product Management': ['Chief Product Officer'], 'Marketing & Communications': ['Chief Marketing Officer'], 'Human Resources': ['Chief People Officer'], 'Operations': ['Chief Operating Officer'], 'Risk & Regulatory': ['Chief Risk Officer'], 'Strategy & Corporate Development': ['Chief Strategy Officer'], 'Data & Analytics': ['Chief Data Officer'] },
    'SVP': { 'Technology & Engineering': ['SVP Engineering'], 'Finance & Accounting': ['SVP Finance'], 'Legal & Compliance': ['SVP Legal'], 'Sales & Commercial': ['SVP Global Sales'], 'Product Management': ['SVP Product'], 'Marketing & Communications': ['SVP Marketing'], 'Human Resources': ['SVP Talent'], 'Operations': ['SVP Operations'], 'Risk & Regulatory': ['SVP Risk'], 'Strategy & Corporate Development': ['SVP Strategy'], 'Data & Analytics': ['SVP Data Science'] },
    'VP': { 'Technology & Engineering': ['VP Engineering'], 'Finance & Accounting': ['VP Finance'], 'Legal & Compliance': ['VP Legal'], 'Sales & Commercial': ['VP Sales'], 'Product Management': ['VP Product'], 'Marketing & Communications': ['VP Marketing'], 'Human Resources': ['VP HR'], 'Operations': ['VP Operations'], 'Risk & Regulatory': ['VP Risk'], 'Strategy & Corporate Development': ['VP Strategy'], 'Data & Analytics': ['VP Analytics'] },
    'Director': { 'Technology & Engineering': ['Director Engineering'], 'Finance & Accounting': ['Director Finance'], 'Legal & Compliance': ['Director Legal'], 'Sales & Commercial': ['Director Sales'], 'Product Management': ['Director Product'], 'Marketing & Communications': ['Director Marketing'], 'Human Resources': ['Director HR'], 'Operations': ['Director Operations'], 'Risk & Regulatory': ['Director Risk'], 'Strategy & Corporate Development': ['Director Strategy'], 'Data & Analytics': ['Director Analytics'] },
    'Senior Manager': { 'Technology & Engineering': ['Sr. Manager Engineering'], 'Finance & Accounting': ['Sr. Manager Finance'], 'Legal & Compliance': ['Sr. Manager Legal'], 'Sales & Commercial': ['Sr. Manager Sales'], 'Product Management': ['Sr. Manager Product'], 'Marketing & Communications': ['Sr. Manager Marketing'], 'Human Resources': ['Sr. Manager HR'], 'Operations': ['Sr. Manager Operations'], 'Risk & Regulatory': ['Sr. Manager Risk'], 'Strategy & Corporate Development': ['Sr. Manager Strategy'], 'Data & Analytics': ['Sr. Manager Analytics'] }
};
const FEE_RANGES = { 'C-Suite': [280000, 450000], 'SVP': [180000, 280000], 'VP': [120000, 200000], 'Director': [80000, 140000], 'Senior Manager': [50000, 90000] };

function weightedRandom(items, weights) { const total = weights.reduce((a, b) => a + b, 0); let random = Math.random() * total; for (let i = 0; i < items.length; i++) { random -= weights[i]; if (random <= 0) return items[i]; } return items[items.length - 1]; }
function weightedRandomWithBias(items, weights, bias) { const adjustedWeights = weights.map((w, i) => i === 0 ? w * bias * 1.5 : w); return weightedRandom(items, adjustedWeights); }

function generatePlacements() {
    const placements = []; let id = 1;
    const firmProfiles = { 'Russell Reynolds Associates': { volume: 42, successBias: 0.72, retentionBias: 0.68, premiumFee: 1.15 }, 'Spencer Stuart': { volume: 28, successBias: 0.88, retentionBias: 0.85, premiumFee: 1.35 }, 'Heidrick & Struggles': { volume: 35, successBias: 0.75, retentionBias: 0.72, premiumFee: 1.10 }, 'Korn Ferry': { volume: 48, successBias: 0.68, retentionBias: 0.65, premiumFee: 1.0 }, 'Egon Zehnder': { volume: 18, successBias: 0.85, retentionBias: 0.82, premiumFee: 1.40 }, 'Caldwell Partners': { volume: 22, successBias: 0.78, retentionBias: 0.75, premiumFee: 0.95 } };
    const endDate = new Date(); const startDate = new Date(); startDate.setFullYear(startDate.getFullYear() - 3);
    for (const firm of SEARCH_FIRMS) {
        const profile = firmProfiles[firm.name];
        for (let i = 0; i < profile.volume; i++) {
            const placementDate = new Date(startDate.getTime() + Math.random() * (endDate.getTime() - startDate.getTime()));
            const level = weightedRandom(TR_LEVELS, [0.08, 0.15, 0.28, 0.30, 0.19]);
            const func = TR_FUNCTIONS[Math.floor(Math.random() * TR_FUNCTIONS.length)];
            const region = weightedRandom(TR_REGIONS, [0.45, 0.30, 0.18, 0.07]);
            const titleOptions = ROLE_TITLES[level]?.[func] || ['Executive'];
            const roleTitle = titleOptions[Math.floor(Math.random() * titleOptions.length)];
            const baseFee = FEE_RANGES[level];
            const fee = Math.round((baseFee[0] + Math.random() * (baseFee[1] - baseFee[0])) * profile.premiumFee);
            const monthsSincePlacement = Math.floor((new Date().getTime() - placementDate.getTime()) / (1000 * 60 * 60 * 24 * 30));
            let status, departureDate, tenureMonths, performanceRating;
            const random = Math.random();
            const adjustedRetention = profile.retentionBias + (monthsSincePlacement > 12 ? -0.05 : 0.05);
            if (random < adjustedRetention) { status = 'Active'; departureDate = null; tenureMonths = monthsSincePlacement; performanceRating = weightedRandomWithBias(PERFORMANCE_RATINGS.slice(0, 3), [0.25, 0.55, 0.20], profile.successBias); if (monthsSincePlacement < 6) performanceRating = 'Too Early to Assess'; }
            else if (random < adjustedRetention + 0.15) { status = 'Voluntarily Left'; tenureMonths = Math.min(monthsSincePlacement, Math.floor(6 + Math.random() * 18)); departureDate = new Date(placementDate.getTime() + tenureMonths * 30 * 24 * 60 * 60 * 1000); performanceRating = weightedRandom(PERFORMANCE_RATINGS.slice(0, 3), [0.30, 0.50, 0.20]); }
            else if (random < adjustedRetention + 0.25) { status = 'Terminated'; tenureMonths = Math.min(monthsSincePlacement, Math.floor(3 + Math.random() * 12)); departureDate = new Date(placementDate.getTime() + tenureMonths * 30 * 24 * 60 * 60 * 1000); performanceRating = 'Below'; }
            else { status = 'Role Eliminated'; tenureMonths = Math.min(monthsSincePlacement, Math.floor(6 + Math.random() * 12)); departureDate = new Date(placementDate.getTime() + tenureMonths * 30 * 24 * 60 * 60 * 1000); performanceRating = weightedRandom(PERFORMANCE_RATINGS.slice(0, 3), [0.20, 0.60, 0.20]); }
            const hasRhrAssessment = Math.random() < 0.65;
            let rhrRecommendation = 'N/A';
            if (hasRhrAssessment) { if (performanceRating === 'Exceeds') rhrRecommendation = weightedRandom(['Strong Hire', 'Hire', 'Hire with Caution'], [0.60, 0.35, 0.05]); else if (performanceRating === 'Meets') rhrRecommendation = weightedRandom(['Strong Hire', 'Hire', 'Hire with Caution'], [0.25, 0.60, 0.15]); else if (performanceRating === 'Below') rhrRecommendation = weightedRandom(['Hire', 'Hire with Caution', 'Do Not Hire'], [0.20, 0.50, 0.30]); else rhrRecommendation = weightedRandom(['Strong Hire', 'Hire', 'Hire with Caution'], [0.30, 0.50, 0.20]); }
            placements.push({ id: 'PL-' + String(id++).padStart(4, '0'), search_firm: firm.name, candidate_name: EXEC_NAMES[Math.floor(Math.random() * EXEC_NAMES.length)], role_title: roleTitle, level, function: func, geography: region, placement_date: placementDate.toISOString().split('T')[0], fee_paid: fee, current_status: status, departure_date: departureDate ? departureDate.toISOString().split('T')[0] : null, tenure_months: tenureMonths, performance_rating: performanceRating, rhr_assessment: hasRhrAssessment, rhr_recommendation: rhrRecommendation });
        }
    }
    return placements.sort((a, b) => new Date(b.placement_date) - new Date(a.placement_date));
}
const PLACEMENTS = generatePlacements();

function calculateFirmMetrics(placements) {
    if (placements.length === 0) return { totalPlacements: 0, activePlacements: 0, successRate: 0, retentionRate12: 0, earlyDepartureRate: 0, terminationRate: 0, totalFees: 0, avgFee: 0, costPerSuccess: 0, avgTenure: 0, grade: 'N/A', gradeScore: 0, byLevel: {}, retentionScore: 0, successScore: 0, costScore: 0, earlyDepartScore: 0 };
    const total = placements.length;
    const active = placements.filter(p => p.current_status === 'Active').length;
    const successful = placements.filter(p => ['Exceeds', 'Meets'].includes(p.performance_rating)).length;
    const ratable = placements.filter(p => p.performance_rating !== 'Too Early to Assess').length;
    const eligible12 = placements.filter(p => { const months = Math.floor((new Date() - new Date(p.placement_date)) / (1000 * 60 * 60 * 24 * 30)); return months >= 12; });
    const retained12 = eligible12.filter(p => p.current_status === 'Active' || p.tenure_months >= 12).length;
    const earlyDepartures = placements.filter(p => p.current_status !== 'Active' && p.tenure_months < 12).length;
    const terminated = placements.filter(p => p.current_status === 'Terminated').length;
    const totalFees = placements.reduce((sum, p) => sum + p.fee_paid, 0);
    const avgTenure = placements.reduce((sum, p) => sum + p.tenure_months, 0) / total;
    const successRate = ratable > 0 ? (successful / ratable) * 100 : 0;
    const retentionRate12 = eligible12.length > 0 ? (retained12 / eligible12.length) * 100 : 100;
    const earlyDepartureRate = (earlyDepartures / total) * 100;
    const terminationRate = (terminated / total) * 100;
    const costPerSuccess = successful > 0 ? totalFees / successful : totalFees;
    const retentionScore = Math.min(retentionRate12 / 100, 1) * 30;
    const successScore = Math.min(successRate / 100, 1) * 30;
    const costScore = Math.max(0, (1 - (costPerSuccess - 100000) / 400000)) * 20;
    const earlyDepartScore = Math.max(0, (1 - earlyDepartureRate / 50)) * 20;
    const gradeScore = retentionScore + successScore + costScore + earlyDepartScore;
    let grade; if (gradeScore >= 85) grade = 'A'; else if (gradeScore >= 70) grade = 'B'; else if (gradeScore >= 55) grade = 'C'; else if (gradeScore >= 40) grade = 'D'; else grade = 'F';
    const byLevel = TR_LEVELS.reduce((acc, level) => { acc[level] = placements.filter(p => p.level === level).length; return acc; }, {});
    return { totalPlacements: total, activePlacements: active, successRate, retentionRate12, earlyDepartureRate, terminationRate, totalFees, avgFee: totalFees / total, costPerSuccess, avgTenure, grade, gradeScore, byLevel, retentionScore, successScore, costScore, earlyDepartScore };
}

function formatCurrency(value) { return new Intl.NumberFormat('en-US', { style: 'currency', currency: 'USD', minimumFractionDigits: 0, maximumFractionDigits: 0 }).format(value); }
function formatPercent(value) { return value.toFixed(1) + '%'; }
function getGradeColor(grade) { const colors = { 'A': '#22C55E', 'B': '#84CC16', 'C': '#EAB308', 'D': '#F97316', 'F': '#EF4444' }; return colors[grade] || '#9CA3AF'; }

function Header() {
    const today = new Date().toLocaleDateString('en-US', { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' });
    return e('header', { className: 'header' },
        e('div', { className: 'header-brand' },
            e('span', { className: 'header-logo' }, 'THOMSON REUTERS'),
            e('span', { className: 'header-divider' }),
            e('span', { className: 'header-title' }, 'Executive Search Firm Report Card')
        ),
        e('div', { className: 'header-meta' },
            e('span', { className: 'header-date' }, today),
            e('div', { className: 'header-user', style: { display: 'flex', alignItems: 'center', gap: '8px', fontSize: '14px' } },
                e('div', { className: 'avatar' }, 'TR'),
                e('span', null, 'Talent Acquisition')
            )
        )
    );
}

function Navigation({ activeView, setActiveView }) {
    const views = [{ id: 'scorecard', label: 'Executive Summary' }, { id: 'comparison', label: 'Comparison' }, { id: 'placements', label: 'Placement Explorer' }, { id: 'rhr', label: 'RHR Analysis' }, { id: 'trends', label: 'Trends' }];
    return e('nav', { className: 'nav' }, views.map(view => e('div', { key: view.id, className: 'nav-item' + (activeView === view.id ? ' active' : ''), onClick: () => setActiveView(view.id) }, view.label)));
}

function Glossary({ onClose }) {
    return e('div', { className: 'modal-overlay', onClick: onClose },
        e('div', { className: 'modal', onClick: ev => ev.stopPropagation() },
            e('div', { className: 'modal-header' },
                e('div', { className: 'modal-title' }, 'Metrics Glossary'),
                e('button', { className: 'modal-close', onClick: onClose }, '×')
            ),
            e('div', { className: 'modal-body' },
                e('div', { className: 'glossary-section' },
                    e('div', { className: 'glossary-section-title' }, 'Performance Metrics'),
                    e('div', { className: 'glossary-item' },
                        e('div', { className: 'glossary-term' }, 'Success Rate'),
                        e('div', { className: 'glossary-def' }, 'Percentage of placements rated "Exceeds" or "Meets" expectations, excluding those too early to assess.'),
                        e('div', { className: 'glossary-formula' }, '(Exceeds + Meets) / (Total - Too Early) × 100')
                    ),
                    e('div', { className: 'glossary-item' },
                        e('div', { className: 'glossary-term' }, '12-Month Retention Rate'),
                        e('div', { className: 'glossary-def' }, 'Percentage of placements (12+ months old) where the executive is still active or stayed at least 12 months.'),
                        e('div', { className: 'glossary-formula' }, 'Retained at 12mo / Eligible Placements × 100')
                    ),
                    e('div', { className: 'glossary-item' },
                        e('div', { className: 'glossary-term' }, 'Early Departure Rate'),
                        e('div', { className: 'glossary-def' }, 'Percentage of placements where the executive left (any reason) within the first 12 months.'),
                        e('div', { className: 'glossary-formula' }, 'Departures < 12mo / Total Placements × 100')
                    ),
                    e('div', { className: 'glossary-item' },
                        e('div', { className: 'glossary-term' }, 'Termination Rate'),
                        e('div', { className: 'glossary-def' }, 'Percentage of placements that resulted in involuntary termination.'),
                        e('div', { className: 'glossary-formula' }, 'Terminated / Total Placements × 100')
                    ),
                    e('div', { className: 'glossary-item' },
                        e('div', { className: 'glossary-term' }, 'Average Tenure'),
                        e('div', { className: 'glossary-def' }, 'Mean number of months executives have been in their placed roles (includes both active and departed).'),
                        e('div', { className: 'glossary-formula' }, 'Sum of All Tenure Months / Total Placements')
                    )
                ),
                e('div', { className: 'glossary-section' },
                    e('div', { className: 'glossary-section-title' }, 'Cost Metrics'),
                    e('div', { className: 'glossary-item' },
                        e('div', { className: 'glossary-term' }, 'Average Fee'),
                        e('div', { className: 'glossary-def' }, 'Mean search fee paid per placement.'),
                        e('div', { className: 'glossary-formula' }, 'Total Fees / Total Placements')
                    ),
                    e('div', { className: 'glossary-item' },
                        e('div', { className: 'glossary-term' }, 'Cost per Successful Hire'),
                        e('div', { className: 'glossary-def' }, 'Total fees divided by number of successful placements (Exceeds or Meets).'),
                        e('div', { className: 'glossary-formula' }, 'Total Fees / Successful Placements')
                    )
                ),
                e('div', { className: 'glossary-section' },
                    e('div', { className: 'glossary-section-title' }, 'Grading System'),
                    e('div', { className: 'glossary-item' },
                        e('div', { className: 'glossary-term' }, 'Overall Grade (A-F)'),
                        e('div', { className: 'glossary-def' }, 'Composite score from 0-100 based on four weighted components. Each component contributes points toward the total score.')
                    ),
                    e('div', { className: 'glossary-item' },
                        e('div', { className: 'glossary-term' }, 'Retention Score (30 pts max)'),
                        e('div', { className: 'glossary-def' }, 'Linear scaling of 12-month retention rate. 100% retention = 30 pts, 80% = 24 pts, 50% = 15 pts.'),
                        e('div', { className: 'glossary-formula' }, '(Retention Rate / 100) × 30')
                    ),
                    e('div', { className: 'glossary-item' },
                        e('div', { className: 'glossary-term' }, 'Success Score (30 pts max)'),
                        e('div', { className: 'glossary-def' }, 'Linear scaling of success rate. 100% success = 30 pts, 80% = 24 pts, 50% = 15 pts.'),
                        e('div', { className: 'glossary-formula' }, '(Success Rate / 100) × 30')
                    ),
                    e('div', { className: 'glossary-item' },
                        e('div', { className: 'glossary-term' }, 'Cost Efficiency Score (20 pts max)'),
                        e('div', { className: 'glossary-def' }, 'Based on cost per successful hire. $100K or less = 20 pts (max), $300K = 10 pts, $500K+ = 0 pts. Lower cost = higher score.'),
                        e('div', { className: 'glossary-formula' }, 'max(0, (1 - (Cost per Success - $100K) / $400K)) × 20')
                    ),
                    e('div', { className: 'glossary-item' },
                        e('div', { className: 'glossary-term' }, 'Early Departure Score (20 pts max)'),
                        e('div', { className: 'glossary-def' }, 'Based on early departure rate. 0% departures = 20 pts (max), 25% = 10 pts, 50%+ = 0 pts. Lower departures = higher score.'),
                        e('div', { className: 'glossary-formula' }, 'max(0, (1 - Early Departure Rate / 50)) × 20')
                    ),
                    e('div', { className: 'glossary-item' },
                        e('div', { className: 'glossary-term' }, 'Grade Thresholds'),
                        e('div', { className: 'glossary-def' }, 'A: 85+  |  B: 70-84  |  C: 55-69  |  D: 40-54  |  F: Below 40')
                    )
                ),
                e('div', { className: 'glossary-section' },
                    e('div', { className: 'glossary-section-title' }, 'Status Definitions'),
                    e('div', { className: 'glossary-item' },
                        e('div', { className: 'glossary-term' }, 'Active'),
                        e('div', { className: 'glossary-def' }, 'Executive is currently employed in the placed role.')
                    ),
                    e('div', { className: 'glossary-item' },
                        e('div', { className: 'glossary-term' }, 'Voluntarily Left'),
                        e('div', { className: 'glossary-def' }, 'Executive resigned or departed on their own initiative.')
                    ),
                    e('div', { className: 'glossary-item' },
                        e('div', { className: 'glossary-term' }, 'Terminated'),
                        e('div', { className: 'glossary-def' }, 'Executive was involuntarily separated due to performance or conduct.')
                    ),
                    e('div', { className: 'glossary-item' },
                        e('div', { className: 'glossary-term' }, 'Role Eliminated'),
                        e('div', { className: 'glossary-def' }, 'Position was eliminated due to restructuring (not performance-related).')
                    )
                ),
                e('div', { className: 'glossary-section' },
                    e('div', { className: 'glossary-section-title' }, 'RHR Assessment'),
                    e('div', { className: 'glossary-item' },
                        e('div', { className: 'glossary-term' }, 'RHR Assessed'),
                        e('div', { className: 'glossary-def' }, 'Candidate underwent third-party leadership assessment before hire.')
                    ),
                    e('div', { className: 'glossary-item' },
                        e('div', { className: 'glossary-term' }, 'RHR Recommendation'),
                        e('div', { className: 'glossary-def' }, 'Assessment outcome: Strong Hire, Hire, Hire with Caution, or Do Not Hire.')
                    )
                )
            )
        )
    );
}

function Filters({ filters, setFilters, showGlossary, setShowGlossary }) {
    const handleFilterChange = (key, value) => setFilters(prev => ({ ...prev, [key]: value }));
    const resetFilters = () => setFilters({ timePeriod: 'all', geography: 'all', level: 'all', function: 'all', firm: 'all' });
    return e('div', { className: 'filters-bar' },
        e('div', { className: 'filter-group' }, e('label', { className: 'filter-label' }, 'Time Period'), e('select', { className: 'filter-select', value: filters.timePeriod, onChange: ev => handleFilterChange('timePeriod', ev.target.value) }, e('option', { value: 'all' }, 'All Time'), e('option', { value: '12' }, 'Last 12 Months'), e('option', { value: '24' }, 'Last 24 Months'), e('option', { value: '2026' }, '2026'), e('option', { value: '2025' }, '2025'), e('option', { value: '2024' }, '2024'))),
        e('div', { className: 'filter-group' }, e('label', { className: 'filter-label' }, 'Geography'), e('select', { className: 'filter-select', value: filters.geography, onChange: ev => handleFilterChange('geography', ev.target.value) }, e('option', { value: 'all' }, 'All Regions'), TR_REGIONS.map(geo => e('option', { key: geo, value: geo }, geo)))),
        e('div', { className: 'filter-group' }, e('label', { className: 'filter-label' }, 'Level'), e('select', { className: 'filter-select', value: filters.level, onChange: ev => handleFilterChange('level', ev.target.value) }, e('option', { value: 'all' }, 'All Levels'), TR_LEVELS.map(level => e('option', { key: level, value: level }, level)))),
        e('div', { className: 'filter-group' }, e('label', { className: 'filter-label' }, 'Function'), e('select', { className: 'filter-select', value: filters.function, onChange: ev => handleFilterChange('function', ev.target.value) }, e('option', { value: 'all' }, 'All Functions'), TR_FUNCTIONS.map(func => e('option', { key: func, value: func }, func)))),
        e('div', { className: 'filter-group' }, e('label', { className: 'filter-label' }, 'Search Firm'), e('select', { className: 'filter-select', value: filters.firm, onChange: ev => handleFilterChange('firm', ev.target.value) }, e('option', { value: 'all' }, 'All Firms'), SEARCH_FIRMS.map(firm => e('option', { key: firm.id, value: firm.name }, firm.name)))),
        e('button', { className: 'filter-reset', onClick: resetFilters }, 'Reset Filters'),
        e('button', { className: 'glossary-btn', onClick: () => setShowGlossary(true) }, '? Glossary')
    );
}

function KPICards({ placements }) {
    const metrics = calculateFirmMetrics(placements);
    const kpis = [{ label: 'Total Placements', value: metrics.totalPlacements, format: 'number' }, { label: 'Success Rate', value: metrics.successRate, format: 'percent' }, { label: '12-Month Retention', value: metrics.retentionRate12, format: 'percent' }, { label: 'Total Fees Paid', value: metrics.totalFees, format: 'currency' }];
    return e('div', { className: 'kpi-grid' }, kpis.map((kpi, i) => e('div', { key: i, className: 'kpi-card' }, e('div', { className: 'kpi-label' }, kpi.label), e('div', { className: 'kpi-value' }, kpi.format === 'currency' ? formatCurrency(kpi.value) : kpi.format === 'percent' ? formatPercent(kpi.value) : kpi.value.toLocaleString()))));
}

function FirmScorecard({ firm, placements, onClick }) {
    const metrics = calculateFirmMetrics(placements);
    return e('div', { className: 'scorecard', onClick },
        e('div', { className: 'scorecard-header' },
            e('div', { className: 'grade-badge grade-' + metrics.grade.toLowerCase() }, metrics.grade),
            e('div', { className: 'scorecard-info' }, e('div', { className: 'scorecard-firm' }, firm.name), e('div', { className: 'scorecard-meta' }, firm.specialty)),
            e('div', { className: 'scorecard-trend stable' }, '→ Stable')
        ),
        e('div', { className: 'scorecard-body' },
            e('div', { className: 'scorecard-stats' },
                e('div', { className: 'scorecard-stat' }, e('span', { className: 'stat-label' }, 'Placements'), e('span', { className: 'stat-value' }, metrics.totalPlacements)),
                e('div', { className: 'scorecard-stat' }, e('span', { className: 'stat-label' }, 'Success Rate'), e('span', { className: 'stat-value ' + (metrics.successRate >= 75 ? 'success' : metrics.successRate >= 60 ? 'warning' : 'danger') }, formatPercent(metrics.successRate))),
                e('div', { className: 'scorecard-stat' }, e('span', { className: 'stat-label' }, 'Avg Tenure'), e('span', { className: 'stat-value' }, metrics.avgTenure.toFixed(1) + ' mo')),
                e('div', { className: 'scorecard-stat' }, e('span', { className: 'stat-label' }, 'Total Fees'), e('span', { className: 'stat-value' }, formatCurrency(metrics.totalFees)))
            )
        ),
        e('div', { className: 'scorecard-footer' },
            e('div', { className: 'mini-chart' }),
            e('span', { className: 'view-details' }, 'View Details →')
        )
    );
}

function ExecutiveSummaryView({ placements, onFirmSelect }) {
    const firmData = useMemo(() => SEARCH_FIRMS.map(firm => ({ firm, placements: placements.filter(p => p.search_firm === firm.name), metrics: calculateFirmMetrics(placements.filter(p => p.search_firm === firm.name)) })).sort((a, b) => { const gradeOrder = { 'A': 0, 'B': 1, 'C': 2, 'D': 3, 'F': 4 }; return gradeOrder[a.metrics.grade] - gradeOrder[b.metrics.grade]; }), [placements]);
    return e('div', null, e(KPICards, { placements }), e('div', { className: 'scorecard-grid' }, firmData.map(({ firm, placements: firmPlacements }) => e(FirmScorecard, { key: firm.id, firm, placements: firmPlacements, onClick: () => onFirmSelect(firm) }))));
}

function FirmDeepDive({ firm, placements, onBack }) {
    const metrics = calculateFirmMetrics(placements);
    const performanceData = [{ name: 'Exceeds', value: placements.filter(p => p.performance_rating === 'Exceeds').length, color: '#22C55E' }, { name: 'Meets', value: placements.filter(p => p.performance_rating === 'Meets').length, color: '#3B82F6' }, { name: 'Below', value: placements.filter(p => p.performance_rating === 'Below').length, color: '#EF4444' }, { name: 'Too Early', value: placements.filter(p => p.performance_rating === 'Too Early to Assess').length, color: '#9CA3AF' }].filter(d => d.value > 0);
    const levelData = Object.entries(metrics.byLevel).map(([level, count]) => ({ level, count, successRate: (() => { const lp = placements.filter(p => p.level === level); const s = lp.filter(p => ['Exceeds', 'Meets'].includes(p.performance_rating)).length; const r = lp.filter(p => p.performance_rating !== 'Too Early to Assess').length; return r > 0 ? (s / r * 100) : 0; })() }));
    return e('div', null,
        e('div', { className: 'deep-dive-header' },
            e('div', { className: 'grade-badge grade-' + metrics.grade.toLowerCase(), style: { width: 120, height: 120, fontSize: 64, borderRadius: 16 } }, metrics.grade),
            e('div', { className: 'deep-dive-info' },
                e('button', { className: 'back-button', onClick: onBack }, '← Back to Summary'),
                e('div', { className: 'deep-dive-firm', style: { marginTop: 12 } }, firm.name),
                e('div', { className: 'deep-dive-summary' }, metrics.totalPlacements + ' total placements with ' + formatPercent(metrics.successRate) + ' success rate and ' + formatPercent(metrics.retentionRate12) + ' 12-month retention. Total fees: ' + formatCurrency(metrics.totalFees) + '.'),
                e('div', { className: 'grade-breakdown' },
                    e('div', { className: 'grade-component' }, e('span', { className: 'component-label' }, 'Retention (30%)'), e('span', { className: 'component-score', style: { color: getGradeColor(metrics.retentionScore >= 25 ? 'A' : 'B') } }, metrics.retentionScore.toFixed(1) + '/30')),
                    e('div', { className: 'grade-component' }, e('span', { className: 'component-label' }, 'Success (30%)'), e('span', { className: 'component-score', style: { color: getGradeColor(metrics.successScore >= 25 ? 'A' : 'B') } }, metrics.successScore.toFixed(1) + '/30')),
                    e('div', { className: 'grade-component' }, e('span', { className: 'component-label' }, 'Cost Eff. (20%)'), e('span', { className: 'component-score', style: { color: getGradeColor(metrics.costScore >= 15 ? 'A' : 'B') } }, metrics.costScore.toFixed(1) + '/20')),
                    e('div', { className: 'grade-component' }, e('span', { className: 'component-label' }, 'Early Dep. (20%)'), e('span', { className: 'component-score', style: { color: getGradeColor(metrics.earlyDepartScore >= 15 ? 'A' : 'B') } }, metrics.earlyDepartScore.toFixed(1) + '/20'))
                )
            )
        ),
        e('div', { className: 'charts-grid' },
            e('div', { className: 'chart-container' }, e('div', { className: 'chart-title' }, 'Performance Distribution'), e(ResponsiveContainer, { width: '100%', height: 250 }, e(PieChart, null, e(Pie, { data: performanceData, cx: '50%', cy: '50%', innerRadius: 60, outerRadius: 100, paddingAngle: 2, dataKey: 'value', label: ({ name, value }) => name + ': ' + value }, performanceData.map((entry, i) => e(Cell, { key: i, fill: entry.color }))), e(Tooltip, null), e(Legend, { verticalAlign: 'bottom', height: 36 })))),
            e('div', { className: 'chart-container' }, e('div', { className: 'chart-title' }, 'Success Rate by Level'), e(ResponsiveContainer, { width: '100%', height: 250 }, e(ComposedChart, { data: levelData }, e(CartesianGrid, { strokeDasharray: '3 3', stroke: '#E5E5E5' }), e(XAxis, { dataKey: 'level', tick: { fontSize: 12 } }), e(YAxis, { yAxisId: 'left', orientation: 'left', tick: { fontSize: 12 }, label: { value: 'Count', angle: -90, position: 'insideLeft' } }), e(YAxis, { yAxisId: 'right', orientation: 'right', tick: { fontSize: 12 }, domain: [0, 100], label: { value: '%', angle: 90, position: 'insideRight' } }), e(Tooltip, null), e(Legend, { verticalAlign: 'bottom', height: 36 }), e(Bar, { yAxisId: 'left', dataKey: 'count', fill: '#FF6B00', name: 'Placements' }), e(Line, { yAxisId: 'right', type: 'monotone', dataKey: 'successRate', stroke: '#22C55E', strokeWidth: 2, name: 'Success Rate %' }))))
        ),
        e('div', { className: 'card' }, e('div', { className: 'card-header' }, e('div', null, e('div', { className: 'card-title' }, 'All Placements'), e('div', { className: 'card-subtitle' }, placements.length + ' records'))), e('div', { className: 'card-body', style: { padding: 0 } }, e(PlacementTable, { placements, compact: true })))
    );
}

function PlacementTable({ placements, compact }) {
    const [sortKey, setSortKey] = useState('placement_date');
    const [sortDir, setSortDir] = useState('desc');
    const [page, setPage] = useState(1);
    const pageSize = compact ? 10 : 15;
    const sortedPlacements = useMemo(() => [...placements].sort((a, b) => { let aVal = a[sortKey], bVal = b[sortKey]; if (sortKey === 'fee_paid' || sortKey === 'tenure_months') { aVal = Number(aVal); bVal = Number(bVal); } if (aVal < bVal) return sortDir === 'asc' ? -1 : 1; if (aVal > bVal) return sortDir === 'asc' ? 1 : -1; return 0; }), [placements, sortKey, sortDir]);
    const paginatedPlacements = sortedPlacements.slice((page - 1) * pageSize, page * pageSize);
    const totalPages = Math.ceil(placements.length / pageSize);
    const handleSort = (key) => { if (sortKey === key) setSortDir(prev => prev === 'asc' ? 'desc' : 'asc'); else { setSortKey(key); setSortDir('desc'); } };
    const getStatusClass = (status) => { if (status === 'Active') return 'active'; if (status === 'Voluntarily Left') return 'left'; if (status === 'Terminated') return 'terminated'; return 'eliminated'; };
    const getPerfClass = (rating) => { if (rating === 'Exceeds') return 'exceeds'; if (rating === 'Meets') return 'meets'; if (rating === 'Below') return 'below'; return 'early'; };
    const getLevelClass = (level) => level.toLowerCase().replace(/[\s-]+/g, '-');
    return e('div', null,
        e('table', { className: 'data-table' },
            e('thead', null, e('tr', null,
                e('th', { onClick: () => handleSort('candidate_name') }, 'Candidate'),
                e('th', { onClick: () => handleSort('role_title') }, 'Role'),
                !compact && e('th', { onClick: () => handleSort('search_firm') }, 'Firm'),
                e('th', { onClick: () => handleSort('level') }, 'Level'),
                e('th', { onClick: () => handleSort('placement_date') }, 'Date'),
                e('th', { onClick: () => handleSort('current_status') }, 'Status'),
                e('th', { onClick: () => handleSort('performance_rating') }, 'Performance'),
                e('th', { onClick: () => handleSort('tenure_months') }, 'Tenure'),
                e('th', { onClick: () => handleSort('fee_paid') }, 'Fee')
            )),
            e('tbody', null, paginatedPlacements.map(p => e('tr', { key: p.id },
                e('td', null, e('strong', null, p.candidate_name)),
                e('td', null, p.role_title),
                !compact && e('td', null, p.search_firm),
                e('td', null, e('span', { className: 'level-badge ' + getLevelClass(p.level) }, p.level)),
                e('td', null, new Date(p.placement_date).toLocaleDateString()),
                e('td', null, e('span', { className: 'status-badge ' + getStatusClass(p.current_status) }, e('span', { className: 'status-dot' }), p.current_status)),
                e('td', null, e('span', { className: 'perf-badge ' + getPerfClass(p.performance_rating) }, p.performance_rating)),
                e('td', null, p.tenure_months + ' mo'),
                e('td', null, formatCurrency(p.fee_paid))
            )))
        ),
        totalPages > 1 && e('div', { className: 'pagination' },
            e('button', { className: 'page-btn', disabled: page === 1, onClick: () => setPage(p => p - 1) }, '←'),
            Array.from({ length: Math.min(totalPages, 5) }, (_, i) => { const pageNum = page <= 3 ? i + 1 : page + i - 2; if (pageNum > totalPages || pageNum < 1) return null; return e('button', { key: pageNum, className: 'page-btn' + (page === pageNum ? ' active' : ''), onClick: () => setPage(pageNum) }, pageNum); }),
            e('button', { className: 'page-btn', disabled: page === totalPages, onClick: () => setPage(p => p + 1) }, '→')
        )
    );
}

function PlacementExplorerView({ placements }) {
    const [search, setSearch] = useState('');
    const filteredPlacements = useMemo(() => { if (!search) return placements; const term = search.toLowerCase(); return placements.filter(p => p.candidate_name.toLowerCase().includes(term) || p.role_title.toLowerCase().includes(term) || p.search_firm.toLowerCase().includes(term)); }, [placements, search]);
    const exportCSV = () => { const headers = ['ID', 'Candidate', 'Role', 'Firm', 'Level', 'Function', 'Geography', 'Date', 'Status', 'Performance', 'Tenure', 'Fee']; const rows = filteredPlacements.map(p => [p.id, p.candidate_name, p.role_title, p.search_firm, p.level, p.function, p.geography, p.placement_date, p.current_status, p.performance_rating, p.tenure_months, p.fee_paid]); const csv = [headers, ...rows].map(r => r.map(c => '"' + c + '"').join(',')).join('\n'); const blob = new Blob([csv], { type: 'text/csv' }); const url = URL.createObjectURL(blob); const a = document.createElement('a'); a.href = url; a.download = 'thomson-reuters-placements.csv'; a.click(); };
    return e('div', { className: 'card' },
        e('div', { className: 'card-header' }, e('div', null, e('div', { className: 'card-title' }, 'Placement Explorer'), e('div', { className: 'card-subtitle' }, filteredPlacements.length + ' of ' + placements.length + ' records'))),
        e('div', { className: 'card-body' },
            e('div', { className: 'table-controls' }, e('input', { type: 'text', className: 'search-input', placeholder: 'Search placements...', value: search, onChange: ev => setSearch(ev.target.value) }), e('button', { className: 'export-btn', onClick: exportCSV }, 'Export CSV')),
            e(PlacementTable, { placements: filteredPlacements })
        )
    );
}

function ComparisonView({ placements }) {
    const [selectedFirms, setSelectedFirms] = useState(['Spencer Stuart', 'Russell Reynolds Associates', 'Korn Ferry']);
    const firmMetrics = useMemo(() => selectedFirms.map(firmName => ({ name: firmName, metrics: calculateFirmMetrics(placements.filter(p => p.search_firm === firmName)) })), [placements, selectedFirms]);
    const toggleFirm = (firmName) => setSelectedFirms(prev => { if (prev.includes(firmName)) return prev.filter(f => f !== firmName); else if (prev.length < 3) return [...prev, firmName]; return prev; });
    const metrics = [{ key: 'totalPlacements', label: 'Total Placements', format: 'number', max: 60 }, { key: 'successRate', label: 'Success Rate', format: 'percent', max: 100 }, { key: 'retentionRate12', label: '12-Month Retention', format: 'percent', max: 100 }, { key: 'avgFee', label: 'Average Fee', format: 'currency', max: 300000 }, { key: 'avgTenure', label: 'Average Tenure (months)', format: 'number', max: 30 }];
    const colors = ['#FF6B00', '#3B82F6', '#22C55E'];
    const recommendation = useMemo(() => { if (firmMetrics.length === 0) return null; return firmMetrics.reduce((a, b) => a.metrics.gradeScore > b.metrics.gradeScore ? a : b); }, [firmMetrics]);
    return e('div', null,
        e('div', { className: 'comparison-selector' }, SEARCH_FIRMS.map(firm => e('label', { key: firm.id, className: 'firm-checkbox' + (selectedFirms.includes(firm.name) ? ' selected' : '') }, e('input', { type: 'checkbox', checked: selectedFirms.includes(firm.name), onChange: () => toggleFirm(firm.name) }), firm.name))),
        selectedFirms.length > 0 && e('div', null,
            e('div', { className: 'comparison-grid' }, firmMetrics.map((fm, i) => e('div', { key: fm.name, className: 'card' }, e('div', { className: 'card-header', style: { background: colors[i], color: 'white' } }, e('div', { className: 'card-title', style: { color: 'white' } }, fm.name)), e('div', { className: 'card-body', style: { textAlign: 'center', padding: 24 } }, e('div', { className: 'grade-badge grade-' + fm.metrics.grade.toLowerCase(), style: { margin: '0 auto 16px', width: 80, height: 80, fontSize: 40 } }, fm.metrics.grade), e('div', { style: { fontSize: 14, color: '#5D5D5D' } }, 'Score: ' + fm.metrics.gradeScore.toFixed(1) + '/100'))))),
            e('div', { className: 'card' }, e('div', { className: 'card-header' }, e('div', { className: 'card-title' }, 'Head-to-Head Comparison')), e('div', { className: 'card-body' }, e('div', { className: 'comparison-metrics' }, metrics.map(metric => e('div', { key: metric.key, className: 'metric-row' }, e('div', { className: 'metric-name' }, metric.label), e('div', { className: 'metric-bars' }, firmMetrics.map((fm, i) => { const value = fm.metrics[metric.key]; const width = Math.min((value / metric.max) * 100, 100); const displayValue = metric.format === 'currency' ? formatCurrency(value) : metric.format === 'percent' ? formatPercent(value) : value.toFixed(1); return e('div', { key: fm.name, className: 'metric-bar-container' }, e('div', { className: 'metric-bar-label' }, fm.name.split(' ')[0]), e('div', { className: 'metric-bar', style: { width: Math.max(width, 15) + '%', background: colors[i] } }, displayValue)); }))))))),
            recommendation && e('div', { className: 'recommendation-box' }, e('div', { className: 'recommendation-header' }, '💡 Recommendation'), e('div', { className: 'recommendation-text' }, 'Based on current filters, ', e('strong', null, recommendation.name), ' shows the strongest overall performance with a grade score of ' + recommendation.metrics.gradeScore.toFixed(1) + '/100, featuring a ' + formatPercent(recommendation.metrics.successRate) + ' success rate and ' + formatPercent(recommendation.metrics.retentionRate12) + ' 12-month retention.'))
        )
    );
}

function RHRAnalysisView({ placements }) {
    const assessedPlacements = placements.filter(p => p.rhr_assessment);
    const nonAssessedPlacements = placements.filter(p => !p.rhr_assessment);
    const assessedMetrics = calculateFirmMetrics(assessedPlacements);
    const nonAssessedMetrics = calculateFirmMetrics(nonAssessedPlacements);
    return e('div', null,
        e('div', { className: 'rhr-comparison' },
            e('div', { className: 'rhr-group' }, e('div', { className: 'rhr-group-header' }, e('span', null, 'RHR Assessed Placements'), e('span', { className: 'rhr-group-count' }, assessedPlacements.length + ' placements')), e('div', { className: 'rhr-metrics' }, e('div', { className: 'rhr-metric' }, e('div', { className: 'rhr-metric-value', style: { color: '#22C55E' } }, formatPercent(assessedMetrics.successRate)), e('div', { className: 'rhr-metric-label' }, 'Success Rate')), e('div', { className: 'rhr-metric' }, e('div', { className: 'rhr-metric-value', style: { color: '#3B82F6' } }, formatPercent(assessedMetrics.retentionRate12)), e('div', { className: 'rhr-metric-label' }, '12-Mo Retention')), e('div', { className: 'rhr-metric' }, e('div', { className: 'rhr-metric-value', style: { color: '#FF6B00' } }, assessedMetrics.avgTenure.toFixed(1) + ' mo'), e('div', { className: 'rhr-metric-label' }, 'Avg Tenure')), e('div', { className: 'rhr-metric' }, e('div', { className: 'rhr-metric-value', style: { color: '#EF4444' } }, formatPercent(assessedMetrics.terminationRate)), e('div', { className: 'rhr-metric-label' }, 'Termination Rate')))),
            e('div', { className: 'rhr-group' }, e('div', { className: 'rhr-group-header' }, e('span', null, 'Non-Assessed Placements'), e('span', { className: 'rhr-group-count' }, nonAssessedPlacements.length + ' placements')), e('div', { className: 'rhr-metrics' }, e('div', { className: 'rhr-metric' }, e('div', { className: 'rhr-metric-value', style: { color: '#22C55E' } }, formatPercent(nonAssessedMetrics.successRate)), e('div', { className: 'rhr-metric-label' }, 'Success Rate')), e('div', { className: 'rhr-metric' }, e('div', { className: 'rhr-metric-value', style: { color: '#3B82F6' } }, formatPercent(nonAssessedMetrics.retentionRate12)), e('div', { className: 'rhr-metric-label' }, '12-Mo Retention')), e('div', { className: 'rhr-metric' }, e('div', { className: 'rhr-metric-value', style: { color: '#FF6B00' } }, nonAssessedMetrics.avgTenure.toFixed(1) + ' mo'), e('div', { className: 'rhr-metric-label' }, 'Avg Tenure')), e('div', { className: 'rhr-metric' }, e('div', { className: 'rhr-metric-value', style: { color: '#EF4444' } }, formatPercent(nonAssessedMetrics.terminationRate)), e('div', { className: 'rhr-metric-label' }, 'Termination Rate'))))
        ),
        e('div', { className: 'recommendation-box' }, e('div', { className: 'recommendation-header' }, '📊 Analysis Insight'), e('div', { className: 'recommendation-text' }, assessedMetrics.successRate > nonAssessedMetrics.successRate ? 'RHR-assessed placements show a ' + (assessedMetrics.successRate - nonAssessedMetrics.successRate).toFixed(1) + ' percentage point higher success rate compared to non-assessed placements (' + formatPercent(assessedMetrics.successRate) + ' vs ' + formatPercent(nonAssessedMetrics.successRate) + '). This data supports continuing RHR assessments for executive hires.' : 'Non-assessed placements currently show comparable or better outcomes than RHR-assessed placements. Consider reviewing the assessment criteria.'))
    );
}

function TrendsView({ placements }) {
    const quarterlyData = useMemo(() => { const quarters = {}; placements.forEach(p => { const date = new Date(p.placement_date); const q = date.getFullYear() + ' Q' + (Math.floor(date.getMonth() / 3) + 1); if (!quarters[q]) quarters[q] = { quarter: q, placements: 0, successful: 0, totalFees: 0 }; quarters[q].placements++; if (['Exceeds', 'Meets'].includes(p.performance_rating)) quarters[q].successful++; quarters[q].totalFees += p.fee_paid; }); return Object.values(quarters).map(q => ({ ...q, successRate: q.placements > 0 ? (q.successful / q.placements * 100) : 0, avgFee: q.placements > 0 ? q.totalFees / q.placements : 0 })).sort((a, b) => a.quarter.localeCompare(b.quarter)); }, [placements]);
    return e('div', null,
        e('div', { className: 'charts-grid' },
            e('div', { className: 'chart-container' }, e('div', { className: 'chart-title' }, 'Quarterly Placement Volume'), e(ResponsiveContainer, { width: '100%', height: 280 }, e(AreaChart, { data: quarterlyData }, e(CartesianGrid, { strokeDasharray: '3 3', stroke: '#E5E5E5' }), e(XAxis, { dataKey: 'quarter', tick: { fontSize: 11 } }), e(YAxis, { tick: { fontSize: 12 }, label: { value: 'Count', angle: -90, position: 'insideLeft' } }), e(Tooltip, null), e(Legend, { verticalAlign: 'bottom', height: 36 }), e(Area, { type: 'monotone', dataKey: 'placements', stroke: '#FF6B00', fill: '#FF6B00', fillOpacity: 0.3, name: 'Total Placements' })))),
            e('div', { className: 'chart-container' }, e('div', { className: 'chart-title' }, 'Success Rate Trend'), e(ResponsiveContainer, { width: '100%', height: 280 }, e(LineChart, { data: quarterlyData }, e(CartesianGrid, { strokeDasharray: '3 3', stroke: '#E5E5E5' }), e(XAxis, { dataKey: 'quarter', tick: { fontSize: 11 } }), e(YAxis, { tick: { fontSize: 12 }, domain: [0, 100], label: { value: '%', angle: -90, position: 'insideLeft' } }), e(Tooltip, { formatter: v => formatPercent(v) }), e(Legend, { verticalAlign: 'bottom', height: 36 }), e(Line, { type: 'monotone', dataKey: 'successRate', stroke: '#22C55E', strokeWidth: 2, name: 'Success Rate %', dot: { r: 4 } })))),
            e('div', { className: 'chart-container' }, e('div', { className: 'chart-title' }, 'Average Fee per Placement'), e(ResponsiveContainer, { width: '100%', height: 280 }, e(BarChart, { data: quarterlyData }, e(CartesianGrid, { strokeDasharray: '3 3', stroke: '#E5E5E5' }), e(XAxis, { dataKey: 'quarter', tick: { fontSize: 11 } }), e(YAxis, { tick: { fontSize: 12 }, tickFormatter: v => '$' + (v / 1000).toFixed(0) + 'K', label: { value: 'USD', angle: -90, position: 'insideLeft' } }), e(Tooltip, { formatter: v => formatCurrency(v) }), e(Legend, { verticalAlign: 'bottom', height: 36 }), e(Bar, { dataKey: 'avgFee', fill: '#3B82F6', name: 'Average Fee' }))))
        )
    );
}

function App() {
    const [activeView, setActiveView] = useState('scorecard');
    const [selectedFirm, setSelectedFirm] = useState(null);
    const [filters, setFilters] = useState({ timePeriod: 'all', geography: 'all', level: 'all', function: 'all', firm: 'all' });
    const [showGlossary, setShowGlossary] = useState(false);
    const filteredPlacements = useMemo(() => PLACEMENTS.filter(p => { if (filters.timePeriod !== 'all') { const placementDate = new Date(p.placement_date); if (['12', '24'].includes(filters.timePeriod)) { const cutoff = new Date(); cutoff.setMonth(cutoff.getMonth() - parseInt(filters.timePeriod)); if (placementDate < cutoff) return false; } else { if (!p.placement_date.startsWith(filters.timePeriod)) return false; } } if (filters.geography !== 'all' && p.geography !== filters.geography) return false; if (filters.level !== 'all' && p.level !== filters.level) return false; if (filters.function !== 'all' && p.function !== filters.function) return false; if (filters.firm !== 'all' && p.search_firm !== filters.firm) return false; return true; }), [filters]);
    const handleFirmSelect = (firm) => { setSelectedFirm(firm); setActiveView('deepdive'); };
    const handleBackToSummary = () => { setSelectedFirm(null); setActiveView('scorecard'); };
    const renderView = () => { if (activeView === 'deepdive' && selectedFirm) { const firmPlacements = filteredPlacements.filter(p => p.search_firm === selectedFirm.name); return e(FirmDeepDive, { firm: selectedFirm, placements: firmPlacements, onBack: handleBackToSummary }); } switch (activeView) { case 'scorecard': return e(ExecutiveSummaryView, { placements: filteredPlacements, onFirmSelect: handleFirmSelect }); case 'comparison': return e(ComparisonView, { placements: filteredPlacements }); case 'placements': return e(PlacementExplorerView, { placements: filteredPlacements }); case 'rhr': return e(RHRAnalysisView, { placements: filteredPlacements }); case 'trends': return e(TrendsView, { placements: filteredPlacements }); default: return e(ExecutiveSummaryView, { placements: filteredPlacements, onFirmSelect: handleFirmSelect }); } };
    return e('div', null,
        e(Header, null),
        e(Navigation, { activeView: selectedFirm ? 'scorecard' : activeView, setActiveView: view => { setSelectedFirm(null); setActiveView(view); } }),
        e('main', { className: 'main-container' }, e(Filters, { filters, setFilters, showGlossary, setShowGlossary }), renderView()),
        showGlossary && e(Glossary, { onClose: () => setShowGlossary(false) })
    );
}

const root = ReactDOM.createRoot(document.getElementById('root'));
root.render(e(App, null));
    </script>
</body>
</html>
